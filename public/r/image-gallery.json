{
  "name": "image-gallery",
  "type": "registry:block",
  "dependencies": [
    "framer-motion",
    "gsap"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "path": "components/zenblocks/image-gallery.tsx",
      "target": "components/zenblocks/image-gallery.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useRef, useMemo } from 'react';\r\nimport { gsap, Observer } from 'gsap/all';\r\nimport { useGSAP } from '@gsap/react';\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ImageGallery Component\r\n * \"Production-Level\" Infinite Scroll Carousel\r\n * \r\n * Features:\r\n * - Seamless infinite loop (using 2x dupe + wrapping)\r\n * - Inertia-based drag interactions\r\n * - Refined 3D tilt and parallax\r\n * - Premium, contained styling (no overflow mess)\r\n */\r\n\r\ngsap.registerPlugin(Observer);\r\n\r\nconst IMAGES = [\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Ethereal Valley\",\r\n        tag: \"Nature\"\r\n    },\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Mist Peaks\",\r\n        tag: \"Atmosphere\"\r\n    },\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Infinite Forest\",\r\n        tag: \"Serenity\"\r\n    },\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Glass Lake\",\r\n        tag: \"Reflection\"\r\n    },\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Zen Bridge\",\r\n        tag: \"Path\"\r\n    },\r\n    {\r\n        url: \"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=1200&auto=format&fit=crop\",\r\n        title: \"Crimson Horizon\",\r\n        tag: \"Twilight\"\r\n    },\r\n];\r\n\r\ninterface ImageGalleryProps {\r\n    className?: string;\r\n    items?: typeof IMAGES;\r\n}\r\n\r\nexport const ImageGallery: React.FC<ImageGalleryProps> = ({\r\n    className,\r\n    items = IMAGES\r\n}) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const trackRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Duplicate items for seamless loop (triple buffer is safest for wide screens)\r\n    const displayItems = useMemo(() => [...items, ...items, ...items], [items]);\r\n\r\n    useGSAP(() => {\r\n        if (!containerRef.current || !trackRef.current) return;\r\n\r\n        const track = trackRef.current;\r\n        const allItems = gsap.utils.toArray<HTMLElement>('.gallery-item');\r\n\r\n        // Layout Config\r\n        const itemWidth = 320; // Fixed width w-[320px]\r\n        const gap = 32;        // gap-8 = 32px\r\n        const totalItemWidth = itemWidth + gap;\r\n        const groupWidth = items.length * totalItemWidth;\r\n\r\n        // Initialize position\r\n        // Center the initial view in the middle set of images\r\n        let xPos = -groupWidth;\r\n        gsap.set(track, { x: xPos });\r\n\r\n        let isDragging = false;\r\n        let velocity = 0;\r\n\r\n        const updateLoop = () => {\r\n            // Friction\r\n            velocity *= 0.92;\r\n            xPos += velocity;\r\n\r\n            // Seamless Wrapping Logic\r\n            // If we've scrolled past the first set, wrap back to end\r\n            if (xPos > 0) {\r\n                xPos = -groupWidth;\r\n            }\r\n            // If we've scrolled past the second set, wrap back to start\r\n            else if (xPos < -groupWidth * 2) {\r\n                xPos = -groupWidth;\r\n            }\r\n\r\n            gsap.set(track, { x: xPos });\r\n\r\n            // Apply Parallax to inner images based on velocity\r\n            // More velocity = more skew/parallax\r\n            const skewAmount = gsap.utils.clamp(-5, 5, velocity * 0.5);\r\n            gsap.set(allItems, { skewX: skewAmount });\r\n        };\r\n\r\n        const loop = gsap.to({}, { duration: 1 / 60, repeat: -1, onRepeat: updateLoop });\r\n\r\n        // Auto-scroll drift\r\n        let driftStrength = -0.5;\r\n\r\n        // GSAP Observer for Touch/Wheel/Drag\r\n        const observer = Observer.create({\r\n            target: containerRef.current,\r\n            type: \"wheel,touch,pointer\",\r\n            onPress: () => {\r\n                isDragging = true;\r\n                driftStrength = 0; // Pause auto-drift while interacting\r\n                document.body.style.cursor = 'grabbing';\r\n            },\r\n            onRelease: () => {\r\n                isDragging = false;\r\n                driftStrength = -0.5; // Resume drift\r\n                document.body.style.cursor = 'default';\r\n            },\r\n            onChange: (self) => {\r\n                const delta = self.deltaX || self.deltaY; // vertical scroll wheel -> horizontal drift\r\n                velocity += -delta * 0.05;\r\n            }\r\n        });\r\n\r\n        // Add constant drift to velocity\r\n        gsap.ticker.add(() => {\r\n            if (!isDragging) {\r\n                velocity += driftStrength * 0.05;\r\n            }\r\n        });\r\n\r\n        // Local Interactions (Hover, Tilt)\r\n        allItems.forEach((el) => {\r\n            const item = el as HTMLElement;\r\n            const img = item.querySelector('img');\r\n            const overlay = item.querySelector('.overlay');\r\n\r\n            item.addEventListener('mouseenter', () => {\r\n                if (isDragging) return;\r\n                gsap.to(item, { scale: 1.02, duration: 0.4, ease: \"power2.out\" });\r\n                gsap.to(img, { scale: 1.15, duration: 0.4, ease: \"power2.out\" });\r\n                gsap.to(overlay, { opacity: 1, duration: 0.4 });\r\n            });\r\n\r\n            item.addEventListener('mouseleave', () => {\r\n                gsap.to(item, { scale: 1, duration: 0.4, ease: \"power2.out\" });\r\n                gsap.to(img, { scale: 1.05, duration: 0.4, ease: \"power2.out\" }); // Keep slightly scaled for parallax\r\n                gsap.to(overlay, { opacity: 0, duration: 0.4 });\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            loop.kill();\r\n            observer.kill();\r\n            gsap.ticker.remove(containerRef.current as any); // cleanup ticker listener\r\n        };\r\n\r\n    }, { scope: containerRef });\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={cn(\r\n                \"relative w-full h-[600px] overflow-hidden bg-zinc-50 dark:bg-zinc-950 flex flex-col justify-center select-none cursor-grab active:cursor-grabbing\",\r\n                className\r\n            )}\r\n        >\r\n            {/* Cinematic Fade Edges */}\r\n            <div className=\"absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-zinc-50 to-transparent dark:from-zinc-950 z-20 pointer-events-none\" />\r\n            <div className=\"absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-zinc-50 to-transparent dark:from-zinc-950 z-20 pointer-events-none\" />\r\n\r\n            {/* Title / Header (Optional) */}\r\n            <div className=\"absolute top-4 left-0 w-full text-center z-10 pointer-events-none opacity-40\">\r\n                <p className=\"text-[10px] uppercase tracking-[0.4em] font-bold\">Infinite Series</p>\r\n            </div>\r\n\r\n            {/* TRACK */}\r\n            <div\r\n                ref={trackRef}\r\n                className=\"flex gap-8 px-8 items-center\"\r\n                style={{ width: 'max-content' }}\r\n            >\r\n                {displayItems.map((item, i) => (\r\n                    <div\r\n                        key={i}\r\n                        className=\"gallery-item relative w-[320px] aspect-[3/4] rounded-2xl overflow-hidden bg-zinc-200 dark:bg-zinc-800 shadow-xl border border-white/20 dark:border-white/5 WillChangeTransform\"\r\n                    >\r\n                        {/* Image Container */}\r\n                        <div className=\"absolute inset-0 overflow-hidden\">\r\n                            <img\r\n                                src={item.url}\r\n                                alt={item.title}\r\n                                className=\"w-full h-full object-cover scale-105 transition-transform duration-700 will-change-transform\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Minimalist Overlay */}\r\n                        <div className=\"overlay absolute inset-0 bg-black/40 opacity-0 transition-opacity duration-300 flex flex-col justify-end p-6\">\r\n                            <p className=\"text-[10px] text-white/70 uppercase tracking-widest\">{item.tag}</p>\r\n                            <h3 className=\"text-xl text-white font-medium mt-1\">{item.title}</h3>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Progress / Hint */}\r\n            <div className=\"absolute bottom-4 left-0 w-full text-center z-10 pointer-events-none opacity-40\">\r\n                <p className=\"text-[10px] uppercase tracking-[0.2em]\">Drag to Explore</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"
    }
  ]
}