{
  "name": "logo-loop",
  "type": "registry:block",
  "dependencies": [
    "framer-motion"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "path": "components/zenblocks/logo-loop.tsx",
      "target": "components/zenblocks/logo-loop.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { motion, AnimatePresence, useSpring, useMotionValue, useTransform } from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\nimport { Cpu, Globe, Zap, Shield, Database, Cloud } from \"lucide-react\";\r\n\r\nexport type LogoItem = {\r\n    src?: string;\r\n    node?: React.ReactNode;\r\n    alt?: string;\r\n    name?: string;\r\n};\r\n\r\nconst DEFAULT_LOGOS: LogoItem[] = [\r\n    { node: <Cpu size={20} className=\"text-blue-500\" />, name: \"Compute\" },\r\n    { node: <Globe size={20} className=\"text-emerald-500\" />, name: \"Edge\" },\r\n    { node: <Zap size={20} className=\"text-yellow-500\" />, name: \"Fast\" },\r\n    { node: <Shield size={20} className=\"text-purple-500\" />, name: \"Secure\" },\r\n    { node: <Database size={20} className=\"text-orange-500\" />, name: \"Storage\" },\r\n    { node: <Cloud size={20} className=\"text-cyan-500\" />, name: \"Cloud\" },\r\n];\r\n\r\ninterface LogoLoopProps {\r\n    items?: LogoItem[];\r\n    speed?: number;\r\n    direction?: 'left' | 'right';\r\n    gap?: number;\r\n    logoHeight?: number;\r\n    pauseOnHover?: boolean;\r\n    className?: string;\r\n}\r\n\r\nconst ANIMATION_CONFIG = {\r\n    SMOOTH_TAU: 0.2, // Faster response than reference\r\n    MIN_COPIES: 2,\r\n} as const;\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                               LOGO BOX COMPONENT                           */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nconst LogoBox = ({ item, height }: { item: LogoItem; height: number }) => {\r\n    const mouseX = useMotionValue(0);\r\n    const mouseY = useMotionValue(0);\r\n\r\n    const rotateX = useSpring(useTransform(mouseY, [-0.5, 0.5], [15, -15]), { stiffness: 300, damping: 30 });\r\n    const rotateY = useSpring(useTransform(mouseX, [-0.5, 0.5], [-15, 15]), { stiffness: 300, damping: 30 });\r\n\r\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const x = (e.clientX - rect.left) / rect.width - 0.5;\r\n        const y = (e.clientY - rect.top) / rect.height - 0.5;\r\n        mouseX.set(x);\r\n        mouseY.set(y);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        mouseX.set(0);\r\n        mouseY.set(0);\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            onMouseMove={handleMouseMove}\r\n            onMouseLeave={handleMouseLeave}\r\n            style={{ rotateX, rotateY, height, perspective: 1000 }}\r\n            className=\"relative flex items-center justify-center px-8 py-4 bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 rounded-2xl group/logo transition-colors hover:bg-white dark:hover:bg-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700 shadow-sm hover:shadow-xl group\"\r\n        >\r\n            {/* Glint Effect */}\r\n            <motion.div\r\n                className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none overflow-hidden rounded-2xl\"\r\n            >\r\n                <div className=\"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000 ease-in-out\" />\r\n            </motion.div>\r\n\r\n            {item.node ? (\r\n                <div className=\"flex items-center gap-3\">\r\n                    {item.node}\r\n                    {item.name && <span className=\"text-xs font-black uppercase tracking-widest text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-white transition-colors\">{item.name}</span>}\r\n                </div>\r\n            ) : (\r\n                <img\r\n                    src={item.src}\r\n                    alt={item.alt || \"logo\"}\r\n                    className=\"h-full w-auto grayscale group-hover:grayscale-0 transition-all duration-500 opacity-50 group-hover:opacity-100 scale-90 group-hover:scale-100\"\r\n                />\r\n            )}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                MAIN LOGO LOOP                              */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport const LogoLoop = ({\r\n    items = DEFAULT_LOGOS,\r\n    speed = 100, // px per second\r\n    direction = 'left',\r\n    gap = 24,\r\n    logoHeight = 40,\r\n    pauseOnHover = true,\r\n    className\r\n}: LogoLoopProps) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const trackRef = useRef<HTMLDivElement>(null);\r\n    const seqRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [seqWidth, setSeqWidth] = useState(0);\r\n    const [copyCount, setCopyCount] = useState(2);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    // Animation State\r\n    const offsetRef = useRef(0);\r\n    const lastTimeRef = useRef<number | null>(null);\r\n    const velocityRef = useRef(speed * (direction === 'left' ? 1 : -1));\r\n\r\n    // Determine copies needed\r\n    useEffect(() => {\r\n        const update = () => {\r\n            if (!containerRef.current || !seqRef.current) return;\r\n            const cWidth = containerRef.current.offsetWidth;\r\n            const sWidth = seqRef.current.offsetWidth + gap;\r\n            setSeqWidth(sWidth);\r\n            const needed = Math.ceil(cWidth / sWidth) + 2;\r\n            setCopyCount(Math.max(2, needed));\r\n        };\r\n\r\n        update();\r\n        window.addEventListener('resize', update);\r\n        return () => window.removeEventListener('resize', update);\r\n    }, [items, gap]);\r\n\r\n    // Main RAF Loop\r\n    useEffect(() => {\r\n        const animate = (time: number) => {\r\n            if (lastTimeRef.current === null) {\r\n                lastTimeRef.current = time;\r\n                requestAnimationFrame(animate);\r\n                return;\r\n            }\r\n\r\n            const delta = (time - lastTimeRef.current) / 1000;\r\n            lastTimeRef.current = time;\r\n\r\n            // Smooth velocity transitions\r\n            const targetVel = isHovered && pauseOnHover ? 0 : speed * (direction === 'left' ? 1 : -1);\r\n            const easing = 1 - Math.exp(-delta / ANIMATION_CONFIG.SMOOTH_TAU);\r\n            velocityRef.current += (targetVel - velocityRef.current) * easing;\r\n\r\n            if (seqWidth > 0 && trackRef.current) {\r\n                offsetRef.current += velocityRef.current * delta;\r\n                // Wrap offset\r\n                offsetRef.current = (offsetRef.current % seqWidth + seqWidth) % seqWidth;\r\n                trackRef.current.style.transform = `translate3d(${-offsetRef.current}px, 0, 0)`;\r\n            }\r\n\r\n            requestAnimationFrame(animate);\r\n        };\r\n\r\n        const id = requestAnimationFrame(animate);\r\n        return () => cancelAnimationFrame(id);\r\n    }, [seqWidth, isHovered, speed, direction, pauseOnHover]);\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={cn(\"relative w-full overflow-hidden group/loop py-10\", className)}\r\n        >\r\n            {/* Masking Gradients */}\r\n            <div className=\"absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-white dark:from-zinc-950 to-transparent z-10 pointer-events-none\" />\r\n            <div className=\"absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-white dark:from-zinc-950 to-transparent z-10 pointer-events-none\" />\r\n\r\n            <div\r\n                ref={trackRef}\r\n                className=\"flex w-max\"\r\n                style={{ gap }}\r\n                onMouseEnter={() => setIsHovered(true)}\r\n                onMouseLeave={() => setIsHovered(false)}\r\n            >\r\n                {Array.from({ length: copyCount }).map((_, i) => (\r\n                    <div\r\n                        key={i}\r\n                        ref={i === 0 ? seqRef : null}\r\n                        className=\"flex shrink-0\"\r\n                        style={{ gap }}\r\n                    >\r\n                        {items.map((item, idx) => (\r\n                            <LogoBox key={idx} item={item} height={logoHeight} />\r\n                        ))}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"
    }
  ]
}