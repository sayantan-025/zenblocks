{
  "name": "image-trail",
  "type": "registry:block",
  "dependencies": [
    "gsap"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "path": "components/zenblocks/image-trail.tsx",
      "target": "components/zenblocks/image-trail.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useRef, useEffect, useState } from \"react\";\r\nimport { useGSAP } from \"@gsap/react\";\r\nimport gsap from \"gsap\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport const DEFAULT_IMAGES = [\r\n    \"https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1501854140801-50d01698950b?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=2000&auto=format&fit=crop\",\r\n    \"https://images.unsplash.com/photo-1433086966358-54859d0ed716?q=80&w=2000&auto=format&fit=crop\",\r\n];\r\n\r\ninterface ImageTrailProps {\r\n    images?: string[];\r\n    className?: string;\r\n    containerClassName?: string;\r\n}\r\n\r\nexport const ImageTrail = ({\r\n    images = DEFAULT_IMAGES,\r\n    className,\r\n    containerClassName,\r\n}: ImageTrailProps) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const imagesRef = useRef<HTMLDivElement[]>([]);\r\n    const lastX = useRef(0);\r\n    const lastY = useRef(0);\r\n    const zIndex = useRef(1);\r\n    const activeIndex = useRef(0);\r\n\r\n    // Initial setup: hide all images\r\n    useGSAP(() => {\r\n        gsap.set(imagesRef.current, {\r\n            opacity: 0,\r\n            scale: 0.5,\r\n            xPercent: -50,\r\n            yPercent: -50,\r\n            visibility: \"hidden\"\r\n        });\r\n    }, { scope: containerRef });\r\n\r\n    const handleMouseMove = (e: React.MouseEvent) => {\r\n        if (!containerRef.current) return;\r\n\r\n        const rect = containerRef.current.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const y = e.clientY - rect.top;\r\n\r\n        // Calculate distance from last drop\r\n        const dist = Math.hypot(x - lastX.current, y - lastY.current);\r\n\r\n        if (dist > 60) {\r\n            const img = imagesRef.current[activeIndex.current];\r\n            if (img) {\r\n                zIndex.current += 1;\r\n\r\n                // Reset and clear any existing animation on this specific element\r\n                gsap.killTweensOf(img);\r\n\r\n                // Animate from cursor position\r\n                gsap.fromTo(img,\r\n                    {\r\n                        x: x,\r\n                        y: y,\r\n                        scale: 0.5,\r\n                        opacity: 0,\r\n                        visibility: \"visible\",\r\n                        rotate: Math.random() * 30 - 15,\r\n                        zIndex: zIndex.current\r\n                    },\r\n                    {\r\n                        scale: 1,\r\n                        opacity: 1,\r\n                        duration: 0.4,\r\n                        ease: \"back.out(2)\",\r\n                        onComplete: () => {\r\n                            // Fade out after a short delay\r\n                            gsap.to(img, {\r\n                                opacity: 0,\r\n                                scale: 0.8,\r\n                                delay: 1,\r\n                                duration: 0.8,\r\n                                ease: \"power2.inOut\",\r\n                                onComplete: () => {\r\n                                    gsap.set(img, { visibility: \"hidden\" });\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n\r\n                // Update trackers\r\n                activeIndex.current = (activeIndex.current + 1) % images.length;\r\n                lastX.current = x;\r\n                lastY.current = y;\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            onMouseMove={handleMouseMove}\r\n            className={cn(\r\n                \"relative w-full h-[600px] overflow-hidden bg-zinc-50 dark:bg-zinc-950 rounded-[3rem] border border-zinc-200 dark:border-zinc-800 cursor-crosshair group\",\r\n                containerClassName\r\n            )}\r\n        >\r\n            {/* Background Decor */}\r\n            <div className=\"absolute inset-0 opacity-[0.05] pointer-events-none\"\r\n                style={{ backgroundImage: 'radial-gradient(circle, currentColor 1px, transparent 1px)', backgroundSize: '30px 30px' }} />\r\n\r\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center z-10 pointer-events-none select-none\">\r\n                <h2 className=\"text-4xl md:text-6xl font-black uppercase tracking-tighter text-zinc-900 dark:text-white\">\r\n                    Visual <span className=\"text-blue-500\">Echo</span>\r\n                </h2>\r\n                <p className=\"mt-4 text-[10px] font-black uppercase tracking-[0.4em] text-zinc-500 opacity-60\">\r\n                    Trace the movement\r\n                </p>\r\n            </div>\r\n\r\n            {/* Trail Elements */}\r\n            {images.map((src, i) => (\r\n                <div\r\n                    key={i}\r\n                    ref={(el) => { if (el) imagesRef.current[i] = el; }}\r\n                    className={cn(\r\n                        \"absolute pointer-events-auto rounded-3xl overflow-hidden shadow-2xl border-2 border-white dark:border-zinc-800 transition-transform duration-300 hover:scale-110\",\r\n                        className\r\n                    )}\r\n                    style={{ width: '200px', height: '260px' }}\r\n                >\r\n                    <img\r\n                        src={src}\r\n                        alt=\"echo\"\r\n                        className=\"w-full h-full object-cover\"\r\n                        loading=\"lazy\"\r\n                    />\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n"
    }
  ]
}