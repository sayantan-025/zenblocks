{
  "name": "toast",
  "type": "registry:block",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "path": "components/zenblocks/toast.tsx",
      "target": "components/zenblocks/toast.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useReducer, useState } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { X, CheckCircle2, AlertOctagon, Info, AlertTriangle, Sparkles } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                   TYPES                                    */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport type ToastVariant = \"default\" | \"success\" | \"error\" | \"warning\" | \"info\";\r\n\r\nexport interface ToastData {\r\n    id: string;\r\n    title?: string;\r\n    description?: string;\r\n    variant?: ToastVariant;\r\n    duration?: number;\r\n}\r\n\r\ninterface ToastContextValue {\r\n    toasts: ToastData[];\r\n    toast: (props: Omit<ToastData, \"id\">) => void;\r\n    dismiss: (id: string) => void;\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                  CONTEXT                                   */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nconst ToastContext = createContext<ToastContextValue | undefined>(undefined);\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                  REDUCER                                   */\r\n/* -------------------------------------------------------------------------- */\r\n\r\ntype Action =\r\n    | { type: \"ADD_TOAST\"; toast: ToastData }\r\n    | { type: \"DISMISS_TOAST\"; id: string };\r\n\r\nconst toastReducer = (state: ToastData[], action: Action): ToastData[] => {\r\n    switch (action.type) {\r\n        case \"ADD_TOAST\":\r\n            return [action.toast, ...state].slice(0, 5); // Limit to 5 toasts\r\n        case \"DISMISS_TOAST\":\r\n            return state.filter((t) => t.id !== action.id);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                 PROVIDER                                   */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport const ToastProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const [toasts, dispatch] = useReducer(toastReducer, []);\r\n\r\n    const toast = (props: Omit<ToastData, \"id\">) => {\r\n        const id = Math.random().toString(36).substring(2, 9);\r\n        dispatch({ type: \"ADD_TOAST\", toast: { ...props, id } });\r\n    };\r\n\r\n    const dismiss = (id: string) => {\r\n        dispatch({ type: \"DISMISS_TOAST\", id });\r\n    };\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ toasts, toast, dismiss }}>\r\n            {children}\r\n            <ToastViewport />\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                   HOOK                                     */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport const useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error(\"useToast must be used within a ToastProvider\");\r\n    }\r\n    return context;\r\n};\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                 VIEWPORT                                   */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nfunction ToastViewport() {\r\n    const { toasts } = useToast();\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed bottom-0 right-0 z-[100] flex flex-col gap-3 p-6 w-full max-w-[420px] pointer-events-none\"\r\n            aria-live=\"polite\"\r\n        >\r\n            <AnimatePresence mode=\"popLayout\" initial={false}>\r\n                {toasts.map((toast) => (\r\n                    <ToastItem key={toast.id} toast={toast} />\r\n                ))}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                TOAST ITEM                                  */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nconst VARIANT_STYLES: Record<ToastVariant, string> = {\r\n    default: \"border-zinc-200/50 bg-white/60 dark:bg-zinc-900/60 dark:border-zinc-800/50 text-zinc-900 dark:text-zinc-100\",\r\n    success: \"border-emerald-500/20 bg-emerald-50/80 dark:bg-emerald-950/40 text-emerald-900 dark:text-emerald-100 shadow-lg shadow-emerald-500/20\",\r\n    error: \"border-rose-500/20 bg-rose-50/80 dark:bg-rose-950/40 text-rose-900 dark:text-rose-100 shadow-lg shadow-rose-500/20\",\r\n    warning: \"border-amber-500/20 bg-amber-50/80 dark:bg-amber-950/40 text-amber-900 dark:text-amber-100 shadow-lg shadow-amber-500/20\",\r\n    info: \"border-sky-500/20 bg-sky-50/80 dark:bg-sky-950/40 text-sky-900 dark:text-sky-100 shadow-lg shadow-sky-500/20\",\r\n};\r\n\r\nconst VARIANT_ICONS: Record<ToastVariant, React.ReactNode> = {\r\n    default: <Sparkles className=\"w-5 h-5 text-indigo-500\" />,\r\n    success: <CheckCircle2 className=\"w-5 h-5 text-emerald-500 shadow-sm\" />,\r\n    error: <AlertOctagon className=\"w-5 h-5 text-rose-500 shadow-sm\" />,\r\n    warning: <AlertTriangle className=\"w-5 h-5 text-amber-500 shadow-sm\" />,\r\n    info: <Info className=\"w-5 h-5 text-sky-500 shadow-sm\" />,\r\n};\r\n\r\nfunction ToastItem({ toast }: { toast: ToastData }) {\r\n    const { dismiss } = useToast();\r\n    const [paused, setPaused] = useState(false);\r\n    const duration = toast.duration || 5000;\r\n\r\n    useEffect(() => {\r\n        if (paused) return;\r\n        const timer = setTimeout(() => {\r\n            dismiss(toast.id);\r\n        }, duration);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [toast.id, duration, paused, dismiss]);\r\n\r\n    return (\r\n        <motion.div\r\n            layout\r\n            initial={{ opacity: 0, y: 100, scale: 0.8, rotate: 5 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1, rotate: 0 }}\r\n            exit={{ opacity: 0, scale: 0.8, transition: { duration: 0.2 } }}\r\n            transition={{ type: \"spring\", stiffness: 350, damping: 25, mass: 1 }}\r\n            className={cn(\r\n                \"pointer-events-auto relative flex w-full items-start gap-4 p-4 rounded-2xl border backdrop-blur-xl shadow-2xl overflow-hidden group\",\r\n                VARIANT_STYLES[toast.variant || \"default\"]\r\n            )}\r\n            onMouseEnter={() => setPaused(true)}\r\n            onMouseLeave={() => setPaused(false)}\r\n            role=\"status\"\r\n        >\r\n            {/* Animated Progress Bar */}\r\n            <motion.div\r\n                initial={{ scaleX: 1 }}\r\n                animate={{ scaleX: paused ? 1 : 0 }}\r\n                transition={{ duration: duration / 1000, ease: \"linear\" }}\r\n                className={cn(\r\n                    \"absolute bottom-0 left-0 w-full h-[2px] opacity-30 origin-left\",\r\n                    toast.variant === \"error\" ? \"bg-rose-500\" :\r\n                        toast.variant === \"success\" ? \"bg-emerald-500\" :\r\n                            toast.variant === \"warning\" ? \"bg-amber-500\" :\r\n                                \"bg-indigo-500\"\r\n                )}\r\n            />\r\n\r\n            {VARIANT_ICONS[toast.variant || \"default\"] && (\r\n                <div className=\"shrink-0 pt-0.5\">\r\n                    {VARIANT_ICONS[toast.variant || \"default\"]}\r\n                </div>\r\n            )}\r\n            <div className=\"flex-1 grid gap-1 relative z-10\">\r\n                {toast.title && <div className=\"text-sm font-bold leading-none tracking-tight\">{toast.title}</div>}\r\n                {toast.description && <div className=\"text-xs opacity-80 leading-relaxed font-medium\">{toast.description}</div>}\r\n            </div>\r\n            <button\r\n                onClick={() => dismiss(toast.id)}\r\n                className=\"shrink-0 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-all hover:bg-black/5 dark:hover:bg-white/10 focus:opacity-100 focus:outline-none\"\r\n                aria-label=\"Close\"\r\n            >\r\n                <X className=\"w-4 h-4 opacity-50\" />\r\n            </button>\r\n\r\n            {/* Background Gradient Blob */}\r\n            <div className=\"absolute -z-10 -top-10 -right-10 w-24 h-24 bg-gradient-to-br from-white/20 to-transparent blur-2xl rounded-full pointer-events-none\" />\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                   DEMO                                     */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport function ToastDemo() {\r\n    return (\r\n        <ToastProvider>\r\n            <ToastDemoContent />\r\n        </ToastProvider>\r\n    );\r\n}\r\n\r\nfunction ToastDemoContent() {\r\n    const { toast } = useToast();\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap gap-4 items-center justify-center p-8 border rounded-xl bg-zinc-50/50 dark:bg-zinc-900/50 border-dashed border-zinc-200 dark:border-zinc-800\">\r\n            <button\r\n                onClick={() => toast({ title: \"Success\", description: \"Your file has been uploaded.\", variant: \"success\" })}\r\n                className=\"px-4 py-2 text-sm font-medium bg-emerald-100/50 text-emerald-700 dark:bg-emerald-950/50 dark:text-emerald-300 rounded-lg hover:bg-emerald-200/50 transition-colors\"\r\n            >\r\n                Success\r\n            </button>\r\n            <button\r\n                onClick={() => toast({ title: \"Error\", description: \"Something went wrong.\", variant: \"error\" })}\r\n                className=\"px-4 py-2 text-sm font-medium bg-rose-100/50 text-rose-700 dark:bg-rose-950/50 dark:text-rose-300 rounded-lg hover:bg-rose-200/50 transition-colors\"\r\n            >\r\n                Error\r\n            </button>\r\n            <button\r\n                onClick={() => toast({ title: \"New Message\", description: \"Can we schedule a call?\", variant: \"default\" })}\r\n                className=\"px-4 py-2 text-sm font-medium bg-white text-zinc-900 border shadow-sm dark:bg-zinc-800 dark:text-zinc-100 dark:border-zinc-700 rounded-lg hover:bg-zinc-50 transition-colors\"\r\n            >\r\n                Default\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n"
    }
  ]
}