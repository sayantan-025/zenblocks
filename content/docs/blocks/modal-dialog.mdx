---
title: "Modal Dialog"
description: "A premium modal with cursor-tracking spotlight effects and focus management."
icon: PanelTop
---

import {
  ModalDialog,
  ModalTrigger,
  ModalContent,
  ModalHeader,
  ModalTitle,
  ModalDescription,
  ModalFooter,
  ModalClose,
  ModalDialogDemo,
} from "@/components/zenblocks/modal-dialog";
import { Preview } from "@/components/mdx/preview";

## Overview

A modern modal dialog component with a magnetic spotlight border that follows the cursor. Includes automatic focus trapping, portal rendering, and smooth spring-based animations.

---

## Features

- Cursor-tracking spotlight border effect
- Automatic focus trap and restoration
- Portal rendering to avoid z-index conflicts
- Escape key and backdrop click to close
- Compound component API for flexibility

---

## Preview

<Preview link="modal-dialog">
  <ModalDialogDemo />
</Preview>

---

## Installation

### Method 1: CLI (Recommended)

Install via the ZenBlocks CLI to automatically handle dependencies:

```bash
npx shadcn@latest add https://zenblocks-three.vercel.app/r/modal-dialog.json
```

### Method 2: Manual

1.  **Install Dependencies**

    ```bash
    npm install framer-motion react-dom
    ```

2.  **Copy the Source Code**

    Copy the code below into `components/zenblocks/modal-dialog.tsx`.

    <details>
    <summary>Click to expand source</summary>

    ```tsx
    "use client";

    import React, { createContext, useContext, useState, useRef, useEffect } from "react";
    import { motion, AnimatePresence } from "framer-motion";
    import { createPortal } from "react-dom";
    import { cn } from "@/lib/utils";
    import { X } from "lucide-react";

    const ModalContext = createContext<{ open: boolean; setOpen: (open: boolean) => void } | null>(null);

    export function ModalDialog({ children, open: controlledOpen, onOpenChange, defaultOpen = false }: { children: React.ReactNode; open?: boolean; onOpenChange?: (open: boolean) => void; defaultOpen?: boolean }) {
        const [internalOpen, setInternalOpen] = useState(defaultOpen);
        const open = controlledOpen !== undefined ? controlledOpen : internalOpen;
        const setOpen = onOpenChange || setInternalOpen;

        return <ModalContext.Provider value={{ open, setOpen }}>{children}</ModalContext.Provider>;
    }

    export function ModalTrigger({ children, asChild }: { children: React.ReactNode; asChild?: boolean }) {
        const context = useContext(ModalContext);
        if (!context) throw new Error("ModalTrigger must be used within ModalDialog");

        return <div onClick={() => context.setOpen(true)}>{children}</div>;
    }

    export function ModalContent({ children, spotlightColor = "rgba(255,255,255,0.1)", overlayClassName, hideCloseButton }: { children: React.ReactNode; spotlightColor?: string; overlayClassName?: string; hideCloseButton?: boolean }) {
        const context = useContext(ModalContext);
        if (!context) throw new Error("ModalContent must be used within ModalDialog");
        const [mounted, setMounted] = useState(false);
        const contentRef = useRef<HTMLDivElement>(null);
        const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

        useEffect(() => { setMounted(true); }, []);

        if (!mounted || !context.open) return null;

        return createPortal(
            <AnimatePresence>
                {context.open && (
                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className={cn("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm", overlayClassName)} onClick={() => context.setOpen(false)}>
                        <motion.div ref={contentRef} initial={{ scale: 0.8, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.8, opacity: 0 }} transition={{ type: "spring", stiffness: 300, damping: 25 }} onClick={(e) => e.stopPropagation()} onMouseMove={(e) => { if (!contentRef.current) return; const rect = contentRef.current.getBoundingClientRect(); setMousePos({ x: e.clientX - rect.left, y: e.clientY - rect.top }); }} className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg rounded-2xl bg-white dark:bg-zinc-950 p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 relative overflow-hidden">
                            <div className="absolute inset-0 pointer-events-none" style={{ background: `radial-gradient(600px circle at ${mousePos.x}px ${mousePos.y}px, ${spotlightColor}, transparent 40%)` }} />
                            {!hideCloseButton && (
                                <button onClick={() => context.setOpen(false)} className="absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 transition-opacity">
                                    <X className="h-4 w-4" />
                                </button>
                            )}
                            <div className="relative z-10">{children}</div>
                        </motion.div>
                    </motion.div>
                )}
            </AnimatePresence>,
            document.body
        );
    }

    ModalDialog.Trigger = ModalTrigger;
    ModalDialog.Content = ModalContent;
    ModalDialog.Header = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => <div className={cn("flex flex-col space-y-1.5 text-center sm:text-left", className)} {...props} />;
    ModalDialog.Title = ({ className, ...props }: React.HTMLAttributes<HTMLHeadingElement>) => <h2 className={cn("text-lg font-semibold leading-none tracking-tight", className)} {...props} />;
    ModalDialog.Description = ({ className, ...props }: React.HTMLAttributes<HTMLParagraphElement>) => <p className={cn("text-sm text-zinc-500 dark:text-zinc-400", className)} {...props} />;
    ModalDialog.Footer = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />;
    ModalDialog.Close = ({ children, asChild, className, ...props }: React.ButtonHTMLAttributes<HTMLButtonElement> & { asChild?: boolean }) => {
        const context = useContext(ModalContext);
        return <button onClick={() => context?.setOpen(false)} className={cn("px-4 py-2 rounded-md", className)} {...props}>{children}</button>;
    };
    ```

    </details>

---

## Usage

```tsx
import { ModalDialog } from "@/components/zenblocks/modal-dialog";

<ModalDialog>
  <ModalDialog.Trigger>
    <button>Open</button>
  </ModalDialog.Trigger>
  
  <ModalDialog.Content>
    <ModalDialog.Header>
      <ModalDialog.Title>Title</ModalDialog.Title>
      <ModalDialog.Description>Description</ModalDialog.Description>
    </ModalDialog.Header>
    
    <div className="p-6">
      Your content here
    </div>
    
    <ModalDialog.Footer>
      <ModalDialog.Close>Cancel</ModalDialog.Close>
      <button>Confirm</button>
    </ModalDialog.Footer>
  </ModalDialog.Content>
</ModalDialog>
```

---

## Props

### ModalDialog

| Prop | Type | Default | Description |
|-----|------|---------|-------------|
| open | boolean | - | Controlled open state |
| onOpenChange | (open: boolean) => void | - | Open state change handler |
| defaultOpen | boolean | false | Initial open state |

### ModalDialog.Content

| Prop | Type | Default | Description |
|-----|------|---------|-------------|
| spotlightColor | string | rgba(255,255,255,0.1) | Spotlight glow color |
| overlayClassName | string | - | Backdrop styling classes |
| hideCloseButton | boolean | false | Hide the X close button |

---

## Accessibility

- Uses `role="dialog"` and `aria-modal="true"`
- Focus trap cycles Tab navigation within modal
- Escape key closes modal
- Focus returns to trigger on close
- Proper `aria-labelledby` and `aria-describedby` associations

---

## Customization

### Spotlight Color

```tsx
<ModalDialog.Content spotlightColor="rgba(99, 102, 241, 0.3)">
  Content
</ModalDialog.Content>
```

### Backdrop Style

```tsx
<ModalDialog.Content overlayClassName="bg-black/80 backdrop-blur-xl">
  Content
</ModalDialog.Content>
```

---

## Motion Behavior

- **Entry**: Modal scales from 0.8 to 1.0 with spring physics (`stiffness: 300, damping: 25`)
- **Backdrop**: Fades in with 0.3s duration
- **Spotlight**: Radial gradient follows `mousemove` events relative to modal bounds
- **Exit**: Reverse scale animation with 0.2s duration

---

## Performance Notes

- Uses `React.createPortal` to render at document.body level
- Scroll lock applied to body when modal is open
- Event listeners cleaned up on unmount
- Spotlight uses CSS `background` property (GPU-accelerated)

---

## Examples

### With Form

```tsx
<ModalDialog>
  <ModalDialog.Trigger>Subscribe</ModalDialog.Trigger>
  <ModalDialog.Content>
    <form onSubmit={handleSubmit}>
      <input type="email" placeholder="Email" />
      <button type="submit">Join</button>
    </form>
  </ModalDialog.Content>
</ModalDialog>
```

---

## Notes

- Requires `framer-motion` and `react-dom`
- Portal ensures modal renders above all content
- Focus trap uses Tab key cycling logic
- Compound components can be used independently
