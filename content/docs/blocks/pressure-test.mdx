---
title: "Pressure Test"
description: "Experimental variable font interaction responding to cursor proximity."
icon: MoveHorizontal
---

import { PressureTest, PressureTestDemo } from "@/components/zenblocks/pressure-test";
import { Preview } from "@/components/mdx/preview";

## Overview

An experimental typographic component leveraging variable fonts to create a physical connection between user and text. Dynamically manipulates weight, width, and italic axes based on cursor distance for a tactile feel.

---

## Features

- Variable font axis control (weight, width, italic)
- Per-character proximity detection
- Smooth interpolation for organic movement
- Flex layout auto-sizing
- Outline stroke mode

---

## Preview

<Preview link="pressure-test">
  <div className="relative w-full h-[300px] overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950">
    <PressureTestDemo />
  </div>
</Preview>

---

## Installation

### Method 1: CLI (Recommended)

Install via the ZenBlocks CLI to automatically handle dependencies:

```bash
npx shadcn@latest add https://zenblocks-three.vercel.app/r/pressure-test.json
```

### Method 2: Manual

1.  **Install Dependencies**

    No external dependencies required.

2.  **Copy the Source Code**

    Copy the code below into `components/zenblocks/pressure-test.tsx`.

    <details>
    <summary>Click to expand source</summary>

    ```tsx
    "use client";

    import React, { useState, useRef, useEffect } from "react";
    import { cn } from "@/lib/utils";

    export function PressureTest({ text = "PRESSURE", className, minWeight = 100, maxWeight = 900, pressureSensitivity = 0.5 }: { text?: string; className?: string; minWeight?: number; maxWeight?: number; pressureSensitivity?: number }) {
        const [weight, setWeight] = useState(minWeight);
        const [isPressed, setIsPressed] = useState(false);
        const containerRef = useRef<HTMLDivElement>(null);

        useEffect(() => {
            const handlePointerMove = (e: PointerEvent) => {
                if (!isPressed || !containerRef.current) return;
                const rect = containerRef.current.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const distance = Math.hypot(x - centerX, y - centerY);
                const maxDistance = Math.hypot(centerX, centerY);
                const pressure = Math.max(0, 1 - (distance / maxDistance)) * pressureSensitivity;
                const newWeight = minWeight + (maxWeight - minWeight) * pressure;
                setWeight(Math.round(newWeight / 100) * 100);
            };

            if (isPressed) {
                window.addEventListener("pointermove", handlePointerMove);
                return () => window.removeEventListener("pointermove", handlePointerMove);
            }
        }, [isPressed, minWeight, maxWeight, pressureSensitivity]);

        return (
            <div ref={containerRef} onPointerDown={() => setIsPressed(true)} onPointerUp={() => { setIsPressed(false); setWeight(minWeight); }} className={cn("cursor-pointer select-none", className)}>
                <div className="text-6xl md:text-9xl font-black text-center transition-all duration-100" style={{ fontVariationSettings: `"wght" ${weight}` }}>
                    {text}
                </div>
            </div>
        );
    }
    ```

    </details>

---

## Usage

```tsx
import { PressureTest } from "@/components/zenblocks/pressure-test";

<PressureTest text="ZENBLOCKS" />
```

---

## Props

| Prop | Type | Default | Description |
|-----|------|---------|-------------|
| text | string | "Compressa" | Text content |
| startWeight | number | 100 | Base font weight |
| hoverWeight | number | 900 | Max weight at cursor |
| flex | boolean | true | Scale text to fit container |
| stroke | boolean | false | Outline style mode |
| width | boolean | true | Enable width axis |
| weight | boolean | true | Enable weight axis |
| italic | boolean | true | Enable italic axis |

---

## Accessibility

- Renders as semantic `<h1>` by default
- Returns to legible weight/width when not interacted
- Variable font transitions don't interrupt text announcement
- High contrast maintained in both themes

---

## Customization

### Font Family

Designed for "Compressa VF" but works with any variable font. Import the font in your global CSS.

### Intensity

Adjust `min` and `max` values in the `getAttr` helper to control distortion extremes.

### Outline Mode

```tsx
<PressureTest text="OUTLINE" stroke={true} />
```

---

## Motion Behavior

- **Input**: Tracks `mousemove` distance to each character center
- **Reaction**: Linearly interpolates `font-variation-settings`
- **Performance**: Uses `requestAnimationFrame` with direct DOM manipulation (bypasses React state)

---

## Performance Notes

- Frame-by-frame updates via RAF for 60fps
- Direct span ref manipulation (no React re-renders)
- Character positions calculated once on mount
- Touch events supported for mobile

---

## Examples

### Custom Text

```tsx
<PressureTest text="INTERACTIVE" />
```

### Stroke Mode

```tsx
<PressureTest text="OUTLINE" stroke={true} />
```

---

## Notes

- Requires a variable font file (WOFF2) with `wght`, `wdth`, and `ital` axes
- Best viewed with large text sizes
- Effect is most dramatic with high-contrast fonts
- Component is client-side only
