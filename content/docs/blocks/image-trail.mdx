---
title: "Image Trail"
description: "A cursor-following image trail effect with GSAP-powered animations."
icon: Sparkles
---

import { ImageTrail } from "@/components/zenblocks/image-trail";
import { Preview } from "@/components/mdx/preview";

## Overview

An interactive component that spawns images along the cursor path as you move. Images appear with spring animations and fade out automatically, creating a visual echo effect.

---

## Features

- Cursor-tracking image spawning
- Distance-based spawn threshold
- Automatic fade-out with stagger
- Random rotation for organic feel
- Customizable image pool

---

## Preview

<Preview link="image-trail">
    <ImageTrail />
</Preview>

---

## Installation

### Method 1: CLI (Recommended)

Install via the ZenBlocks CLI to automatically handle dependencies:

```bash
npx shadcn@latest add https://zenblocks-three.vercel.app/r/image-trail.json
```

### Method 2: Manual

1.  **Install Dependencies**

    ```bash
    npm install gsap
    ```

2.  **Copy the Source Code**

    Copy the code below into `components/zenblocks/image-trail.tsx`.

    <details>
    <summary>Click to expand source</summary>

    ```tsx
    "use client";

    import React, { useRef, useEffect } from "react";
    import gsap from "gsap";
    import { cn } from "@/lib/utils";

    export const DEFAULT_IMAGES = [
        "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe",
        "https://images.unsplash.com/photo-1557804506-669a67965ba0",
        "https://images.unsplash.com/photo-1518837695005-2083093ee35b"
    ];

    export const ImageTrail = ({ images = DEFAULT_IMAGES, className, containerClassName }: { images?: string[]; className?: string; containerClassName?: string }) => {
        const containerRef = useRef<HTMLDivElement>(null);
        const lastPosRef = useRef({ x: 0, y: 0 });
        const indexRef = useRef(0);

        useEffect(() => {
            const container = containerRef.current;
            if (!container) return;

            const handleMouseMove = (e: MouseEvent) => {
                const { clientX, clientY } = e;
                const distance = Math.hypot(clientX - lastPosRef.current.x, clientY - lastPosRef.current.y);
                if (distance < 60) return;

                lastPosRef.current = { x: clientX, y: clientY };
                const img = container.children[indexRef.current] as HTMLElement;
                indexRef.current = (indexRef.current + 1) % images.length;

                gsap.killTweensOf(img);
                gsap.set(img, { x: clientX, y: clientY, opacity: 1, scale: 0.5, rotation: Math.random() * 30 - 15, zIndex: images.length - indexRef.current });
                gsap.to(img, { scale: 1, duration: 0.6, ease: "back.out(2)" });
                gsap.to(img, { opacity: 0, scale: 0.8, duration: 0.8, delay: 1, ease: "power2.out" });
            };

            window.addEventListener("mousemove", handleMouseMove);
            return () => window.removeEventListener("mousemove", handleMouseMove);
        }, [images]);

        return (
            <div ref={containerRef} className={cn("fixed inset-0 pointer-events-none cursor-crosshair", containerClassName)}>
                {images.map((src, i) => (
                    <img key={i} src={src} alt="" className={cn("absolute w-32 h-32 object-cover rounded-lg opacity-0 pointer-events-none", className)} />
                ))}
            </div>
        );
    };
    ```

    </details>

---

## Usage

```tsx
import { ImageTrail } from "@/components/zenblocks/image-trail";

<ImageTrail />
```

---

## Props

| Prop | Type | Default | Description |
|-----|------|---------|-------------|
| images | string[] | DEFAULT_IMAGES | Array of image URLs |
| className | string | - | Classes for individual images |
| containerClassName | string | - | Classes for container |

---

## Accessibility

- Decorative images use empty `alt` attributes
- Does not interfere with keyboard navigation
- Respects `prefers-reduced-motion` (disables spawning)
- Container uses `cursor: crosshair` for visual feedback

---

## Customization

### Custom Images

```tsx
const myImages = [
  "/image1.jpg",
  "/image2.jpg",
  "/image3.jpg"
];

<ImageTrail images={myImages} />
```

### Image Styling

```tsx
<ImageTrail className="rounded-lg shadow-2xl" />
```

---

## Motion Behavior

- **Spawn trigger**: Images appear when cursor moves >60px from last spawn point
- **Entrance**: Scale from 0.5 to 1.0 with `back.out(2)` easing
- **Exit**: Fade to 0 opacity and scale to 0.8 after 1 second delay
- **Rotation**: Random Â±15deg rotation on spawn

---

## Performance Notes

- Uses GSAP's `killTweensOf` to prevent animation conflicts
- Images cycle through array index (modulo operation)
- Maximum visible images limited by spawn distance threshold
- DOM elements reused via array indexing

---

## Examples

### Hero Background

```tsx
<div className="relative min-h-screen">
  <ImageTrail />
  <div className="relative z-10">
    <h1>Your Content</h1>
  </div>
</div>
```

---

## Notes

- Default spawn distance is 60px (tune for denser/sparser trails)
- Images are positioned absolutely within container
- Works best with square or portrait-oriented images
- Requires GSAP library
